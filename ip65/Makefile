# ip65.lib : minimal IP stack (UDP only)
# ip65_tcp.lib : full featured TCP/IP stack

AS=ca65
AR=ar65

all: ip65.lib ip65_tcp.lib

%.o: %.s
	$(AS) $<

%_tcp.o: %.s
	$(AS) -DTCP -o $@ $<

IP65OBJS=\
	arithmetic.o \
	arp.o \
	config.o \
	config_c.o \
	copymem.o \
	dhcp.o \
	dhcp_c.o \
	dns.o \
	dns_c.o \
	dottedquad.o \
	dottedquad_c.o \
	eth.o \
	http.o \
	http_c.o \
	httpd.o \
	httpd_c.o \
	icmp_c.o \
	input_c.o \
	ip65.o \
	ip65_c.o \
	tcp_c.o \
	tftp.o \
	timer.o \
	timer_c.o \
	output_buffer.o \
	parser.o \
	sntp.o \
	sntp_c.o \
	string_utils.o \
	udp.o \
	udp_c.o \
	url.o

ip65.lib: $(IP65OBJS) ip.o icmp.o
	$(AR) a $@ $^

ip65_tcp.lib: $(IP65OBJS) ip_tcp.o icmp_tcp.o tcp.o
	$(AR) a $@ $^

clean:
	-rm -f *.o
	-rm -f *.lib
